{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/mergePixels.js","webpack:///./lib/seasonal.js","webpack:///./lib/snowfall.js","webpack:///./lib/stickman.js","webpack:///./lib/screenshot.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","lib_mergePixels","data","pixels","console","log","first","length","pixelValues","slice","j","undefined","push","document","addEventListener","canvasEl","getElementById","ctx","getContext","W","window","innerWidth","H","innerHeight","width","height","ground","Image","src","onload","drawImage","snowfall","constructor","this","mp","particles","x","Math","random","y","angle","draw","bind","particle","clearRect","fillStyle","beginPath","moveTo","arc","PI","fill","update","cos","sin","stickman","player","playerX","playerY","runOffset","runOffset2","jumpOffset","jumpOffset2","started","keys","left","right","up","down","jumps","bindMovements","event","key","spriteOffset","indexOf","weather","bindEvents","weatherData","getImageData","stickData","screenshotCanvas","screenshotCtx","newImage","createImageData","putImageData","setTimeout","setInterval"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","function mergePixels(...data) {\n  const pixels = [];\n  console.log(data);\n  const first = data[0];\n  console.log(first.length);\n  for (let i = 0; pixels.length <= first.length; i += 4) {\n    let pixelValues = data[data.length - 1].slice(i, i + 4);\n    let j = 2;\n    while (\n      (pixelValues[0] === undefined ||\n        (pixelValues[0] === 0 &&\n          pixelValues[1] === 0 &&\n          pixelValues[2] === 0 &&\n          pixelValues[3] === 0)) &&\n      j < data.length + 1\n    ) {\n      pixelValues = data[data.length - j].slice(i, i + 4);\n      j++;\n    }\n    if (pixelValues[0]) {\n      pixels.push(\n        pixelValues[0],\n        pixelValues[1],\n        pixelValues[2],\n        pixelValues[3]\n      );\n    } else {\n      pixels.push(0, 0, 0, 0);\n    }\n  }\n\n  return pixels;\n}\n\nexport default mergePixels;\n","import Snowfall from \"./snowfall\";\nimport Sprite from \"./sprite\";\nimport Screenshot from \"./screenshot\";\nimport Stickman from \"./stickman\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const canvasEl = document.getElementById(\"game-canvas\");\n  const ctx = canvasEl.getContext(\"2d\");\n  let W = window.innerWidth;\n  let H = window.innerHeight;\n  canvasEl.width = W;\n  canvasEl.height = H;\n\n  const ground = new Image();\n  ground.src = \"./blocks.png\";\n  ground.onload = () => {\n    for (let i = 0; i < W; i += 100) {\n      ctx.drawImage(ground, i, H - 90, 100, 100);\n    }\n  };\n\n  const snowfall = new Snowfall(ctx, W, H - 88);\n  const stickman = new Stickman(W, H - 86);\n  stickman.bindMovements();\n  const screenshot = new Screenshot(snowfall, stickman, W, H);\n  screenshot.bindEvents();\n\n  setInterval(() => {\n    stickman.draw();\n    snowfall.draw();\n  }, 26);\n});\n","export default class Snowfall {\n  constructor(ctx, W, H) {\n    this.mp = 500;\n    this.particles = [];\n    for (let i = 0; i < this.mp; i++) {\n      this.particles.push({\n        x: Math.random() * W,\n        y: Math.random() * H,\n        r: Math.random() * 4 + 1,\n        d: Math.random() * this.mp\n      });\n    }\n\n    this.ctx = ctx;\n    this.W = W;\n    this.H = H;\n    this.angle = 0;\n\n    this.draw = this.draw.bind(this);\n  }\n\n  draw() {\n    this.ctx.clearRect(0, 0, this.W, this.H + 4);\n    this.ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\n    this.ctx.beginPath();\n    let particle;\n    for (let i = 0; i < this.mp; i++) {\n      particle = this.particles[i];\n      this.ctx.moveTo(particle.x, particle.y);\n      this.ctx.arc(particle.x, particle.y, particle.r, 0, Math.PI * 2, true);\n    }\n    this.ctx.fill();\n    this.update();\n  }\n\n  update() {\n    this.angle += 0.005;\n    let particle;\n    for (let i = 0; i < this.mp; i++) {\n      particle = this.particles[i];\n\n      particle.y += Math.cos(this.angle + particle.d) + 1 + particle.r / 2;\n      particle.x += Math.sin(this.angle) * 2;\n\n      if (particle.x > this.W + 5 || particle.x < -5 || particle.y > this.H) {\n        if (i % 10 > 0) {\n          this.particles[i] = {\n            x: Math.random() * this.W,\n            y: -10,\n            r: particle.r,\n            d: particle.d\n          };\n        } else {\n          if (Math.sin(this.angle) > 0) {\n            //Enter from the left\n            this.particles[i] = {\n              x: -5,\n              y: Math.random() * this.H,\n              r: particle.r,\n              d: particle.d\n            };\n          } else {\n            //Enter from the right\n            this.particles[i] = {\n              x: this.W + 5,\n              y: Math.random() * this.H,\n              r: particle.r,\n              d: particle.d\n            };\n          }\n        }\n      }\n    }\n  }\n}\n","export default class Stickman {\n  constructor(W, H) {\n    this.W = W;\n    this.H = H;\n    const canvasEl = document.getElementById(\"stickman-canvas\");\n    canvasEl.width = W;\n    canvasEl.height = H;\n    this.ctx = canvasEl.getContext(\"2d\");\n\n    this.player = new Image();\n    this.player.src = \"./playerRunRight.png\";\n\n    this.playerX = W / 2;\n    this.playerY = H - 64;\n    this.runOffset = 0;\n    this.runOffset2 = 0;\n\n    this.jumpOffset = 0;\n    this.jumpOffset2 = 0;\n    this.started = false;\n\n    this.draw = this.draw.bind(this);\n    this.keys = { left: false, right: false, up: false, down: false };\n\n    this.jumps = 0;\n  }\n\n  bindMovements() {\n    document.addEventListener(\"keydown\", event => {\n      switch (event.key) {\n        case \"ArrowUp\":\n          this.keys.up = true;\n          break;\n        case \"ArrowLeft\":\n          this.keys.left = true;\n          break;\n        case \"ArrowRight\":\n          this.keys.right = true;\n          break;\n        case \"ArrowDown\":\n          this.keys.down = true;\n          break;\n        default:\n          break;\n      }\n    });\n\n    document.addEventListener(\"keyup\", event => {\n      switch (event.key) {\n        case \"ArrowUp\":\n          this.keys.up = false;\n          break;\n        case \"ArrowLeft\":\n          this.keys.left = false;\n          break;\n        case \"ArrowRight\":\n          this.keys.right = false;\n          break;\n        case \"ArrowDown\":\n          this.keys.down = false;\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  draw() {\n    this.ctx.clearRect(0, 0, this.W, this.H);\n    this.update();\n\n    let spriteOffset = this.keys.up ? this.jumpOffset2 : this.runOffset2;\n    if (this.playerY > this.H - 100) this.playerY = this.H - 100;\n    this.ctx.drawImage(\n      this.player,\n      spriteOffset,\n      0,\n      64,\n      64,\n      this.playerX,\n      this.playerY,\n      100,\n      100\n    );\n  }\n\n  update() {\n    if (this.keys.up) {\n      if (this.jumps % 5 === 0) {\n        if (!this.started) this.jumpOffset = 0;\n        this.jumpOffset += 64;\n        this.jumpOffset = this.jumpOffset % 704;\n        if (this.keys.left || this.player.src.indexOf(\"Left\") > -1)\n          this.player.src = \"./jumpLeft.png\";\n        if (this.keys.right || this.player.src.indexOf(\"Right\") > -1)\n          this.player.src = \"./jumpRight.png\";\n        this.started = true;\n      }\n      if (this.jumpOffset >= 256 && this.jumpOffset < 384) {\n        this.playerY -= 30;\n      } else if (this.jumpOffset >= 384 && this.jumpOffset < 512) {\n        this.playerY += 30;\n      } else if (this.jumpOffset === 640) {\n        this.started = false;\n      }\n\n      if (this.player.src.indexOf(\"Right\") > -1) {\n        this.jumpOffset2 = 640 - this.jumpOffset;\n      } else {\n        this.jumpOffset2 = this.jumpOffset;\n      }\n\n      this.jumps++;\n    } else {\n      if (this.playerY < this.H - 100) this.playerY += 30;\n      this.started = false;\n      this.jumpOffset = 64;\n      this.jumpOffset2 = 64;\n    }\n\n    if (this.keys.left) {\n      this.playerX -= 10;\n      if (!this.keys.up) {\n        this.runOffset += 64;\n        this.runOffset2 = this.runOffset % 320;\n        this.player.src = \"./playerRunLeft.png\";\n      } else if (this.jumpOffset < 256) {\n        this.playerX += 10;\n      }\n    }\n\n    if (this.keys.right) {\n      this.playerX += 10;\n      if (!this.keys.up) {\n        this.runOffset += 64;\n        this.runOffset2 = this.runOffset % 320;\n        this.runOffset2 = 256 - this.runOffset2;\n\n        this.player.src = \"./playerRunRight.png\";\n      } else if (this.jumpOffset < 256) {\n        this.playerX -= 10;\n      }\n    }\n  }\n}\n","import mergePixels from \"./mergePixels\";\n\nexport default class Screenshot {\n  constructor(weather, stickman, W, H) {\n    this.W = W;\n    this.H = H;\n    this.weather = weather;\n    this.stickman = stickman;\n\n    this.bindEvents = this.bindEvents.bind(this);\n  }\n\n  bindEvents() {\n    key(\"space\", () => {\n      const weatherData = this.weather.ctx.getImageData(\n        0,\n        0,\n        this.weather.W,\n        this.weather.H\n      ).data;\n      const stickData = this.stickman.ctx.getImageData(\n        0,\n        0,\n        this.stickman.W,\n        this.stickman.H\n      ).data;\n\n      const data = mergePixels(stickData, weatherData);\n\n      for (let i = 0; i < data.length; i += 4) {\n        if (\n          data[i] === 0 &&\n          data[i + 1] === 0 &&\n          data[i + 2] === 0 &&\n          data[i + 3] === 0\n        ) {\n          data[i] = 255 - data[i];\n          data[i + 1] = 255 - data[i + 1];\n          data[i + 2] = 255 - data[i + 2];\n          data[i + 3] = 255;\n        } else {\n          data[i] = 255 - data[i];\n          data[i + 1] = 255 - data[i + 1];\n          data[i + 2] = 255 - data[i + 2];\n        }\n      }\n\n      const screenshotCanvas = document.getElementById(\"screenshot-canvas\");\n      screenshotCanvas.width = this.W;\n      screenshotCanvas.height = this.H;\n      const screenshotCtx = screenshotCanvas.getContext(\"2d\");\n\n      const newImage = screenshotCtx.createImageData(this.W, this.H);\n      for (let i = 0; i < newImage.data.length; i++) {\n        newImage.data[i] = data[i];\n      }\n\n      screenshotCtx.putImageData(newImage, 0, 0);\n      setTimeout(() => {\n        screenshotCtx.clearRect(0, 0, this.W, this.H);\n      }, 2000);\n    });\n  }\n}\n"],"sourceRoot":""}