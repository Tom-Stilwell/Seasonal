!function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);var i=function(...t){const e=[];console.log(t);const s=t[0];console.log(s.length);for(let i=0;e.length<=s.length;i+=4){let s=t[t.length-1].slice(i,i+4),a=2;for(;(void 0===s[0]||0===s[0]&&0===s[1]&&0===s[2]&&0===s[3])&&a<t.length+1;)s=t[t.length-a].slice(i,i+4),a++;s[0]?e.push(s[0],s[1],s[2],s[3]):e.push(0,0,0,0)}return e};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("game-canvas"),e=t.getContext("2d");let s=window.innerWidth,a=window.innerHeight;t.width=s,t.height=a;const h=new Image;h.src="./blocks.png",h.onload=(()=>{for(let t=0;t<s;t+=100)e.drawImage(h,t,a-90,100,100)});const r=new class{constructor(t,e,s){this.mp=500,this.particles=[];for(let t=0;t<this.mp;t++)this.particles.push({x:Math.random()*e,y:Math.random()*s,r:4*Math.random()+1,d:Math.random()*this.mp});this.ctx=t,this.W=e,this.H=s,this.angle=0,this.draw=this.draw.bind(this)}draw(){let t;this.ctx.clearRect(0,0,this.W,this.H+4),this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.beginPath();for(let e=0;e<this.mp;e++)t=this.particles[e],this.ctx.moveTo(t.x,t.y),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI,!0);this.ctx.fill(),this.update()}update(){let t;this.angle+=.005;for(let e=0;e<this.mp;e++)(t=this.particles[e]).y+=Math.cos(this.angle+t.d)+1+t.r/2,t.x+=2*Math.sin(this.angle),(t.x>this.W+5||t.x<-5||t.y>this.H)&&(e%10>0?this.particles[e]={x:Math.random()*this.W,y:-10,r:t.r,d:t.d}:Math.sin(this.angle)>0?this.particles[e]={x:-5,y:Math.random()*this.H,r:t.r,d:t.d}:this.particles[e]={x:this.W+5,y:Math.random()*this.H,r:t.r,d:t.d})}}(e,s,a-88),n=new class{constructor(t,e){this.W=t,this.H=e;const s=document.getElementById("stickman-canvas");s.width=t,s.height=e,this.ctx=s.getContext("2d"),this.player=new Image,this.player.src="./playerRunRight.png",this.playerX=t/2,this.playerY=e-64,this.playerOffset=0,this.playerOffset2=0,this.started=!1,this.draw=this.draw.bind(this)}bindMovements(){key("left",()=>{this.playerX-=10,this.playerOffset+=64,this.playerOffset2=this.playerOffset%320,this.player.src="./playerRunLeft.png"}),key("right",()=>{this.playerX+=10,this.playerOffset+=64,this.playerOffset2=this.playerOffset%320,this.playerOffset2=256-this.playerOffset2,this.player.src="./playerRunRight.png"}),document.addEventListener("keydown",t=>{switch(t.key){case"ArrowUp":this.started||(this.playerOffset=0),this.playerOffset+=64,this.playerOffset2=this.playerOffset%704,this.player.src.indexOf("Left")>-1&&(this.player.src="./jumpLeft.png"),this.player.src.indexOf("Right")>-1&&(this.player.src="./jumpRight.png"),this.started=!0,this.playerOffset2>=256&&this.playerOffset2<384?this.playerY-=50:this.playerOffset2>=384&&this.playerOffset2<512?this.playerY+=50:640===this.playerOffset2&&(this.started=!1),this.player.src.indexOf("Right")>-1&&(this.playerOffset2=640-this.playerOffset2)}}),document.addEventListener("keyup",t=>{this.playerY=this.H-60,this.playerOffset=0,this.playerOffset2=0,this.player.src.indexOf("jump")>-1&&(this.playerOffset2=64)})}draw(){this.ctx.clearRect(0,0,this.W,this.H),this.ctx.drawImage(this.player,this.playerOffset2,0,64,64,this.playerX,this.playerY,64,64)}}(s,a-86);n.bindMovements(),new class{constructor(t,e,s,i){this.W=s,this.H=i,this.weather=t,this.stickman=e,this.bindEvents=this.bindEvents.bind(this)}bindEvents(){key("space",()=>{const t=this.weather.ctx.getImageData(0,0,this.weather.W,this.weather.H).data,e=this.stickman.ctx.getImageData(0,0,this.stickman.W,this.stickman.H).data,s=i(e,t);for(let t=0;t<s.length;t+=4)0===s[t]&&0===s[t+1]&&0===s[t+2]&&0===s[t+3]?(s[t]=255-s[t],s[t+1]=255-s[t+1],s[t+2]=255-s[t+2],s[t+3]=255):(s[t]=255-s[t],s[t+1]=255-s[t+1],s[t+2]=255-s[t+2]);const a=document.getElementById("screenshot-canvas");a.width=this.W,a.height=this.H;const h=a.getContext("2d"),r=h.createImageData(this.W,this.H);for(let t=0;t<r.data.length;t++)r.data[t]=s[t];h.putImageData(r,0,0),setTimeout(()=>{h.clearRect(0,0,this.W,this.H)},2e3)})}}(r,n,s,a).bindEvents(),setInterval(()=>{n.draw(),r.draw()},26)})}]);
//# sourceMappingURL=bundle.js.map