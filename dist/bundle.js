!function(t){var s={};function i(h){if(s[h])return s[h].exports;var e=s[h]={i:h,l:!1,exports:{}};return t[h].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=s,i.d=function(t,s,h){i.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:h})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=0)}([function(t,s,i){"use strict";i.r(s);document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("game-canvas"),s=t.getContext("2d");let i=window.innerWidth,h=window.innerHeight;t.width=i,t.height=h;const e=new Image;e.src="./blocks.png",e.onload=(()=>{for(let t=0;t<i;t+=100)s.drawImage(e,t,h-90,100,100)});const r=new class{constructor(t,s,i){this.mp=500,this.particles=new Array(this.mp);for(let t=0;t<this.mp;t++)this.particles[t]={x:Math.random()*s,y:Math.random()*i,r:3*Math.random()+1,d:Math.random()*this.mp};this.ctx=t,this.W=s,this.H=i,this.angle=0,this.draw=this.draw.bind(this)}draw(){let t;this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.beginPath();for(let s=0;s<this.mp;s++)t=this.particles[s],this.ctx.moveTo(t.x,t.y),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI,!0);this.ctx.fill(),this.update()}update(){let t;this.angle+=.005;for(let s=0;s<this.mp;s++)(t=this.particles[s]).y+=Math.cos(this.angle+t.d)+1+t.r/2,t.x+=2*Math.sin(this.angle),(t.x>this.W+5||t.x<-5||t.y>this.H)&&(s%10>0?this.particles[s]={x:Math.random()*this.W,y:-10,r:t.r,d:t.d}:Math.sin(this.angle)>0?this.particles[s]={x:-5,y:Math.random()*this.H,r:t.r,d:t.d}:this.particles[s]={x:this.W+5,y:Math.random()*this.H,r:t.r,d:t.d})}}(s,i,h-84),n=new class{constructor(t,s,i){this.ctx=t,this.W=s,this.H=i,this.width=64,this.height=64,this.posX=s/2,this.posY=i-64,this.hit=!1,this.rightHit=!1,this.leftHit=!1,this.topHit=!1,this.bottomHit=!1,this.player=new Image,this.player.src="./playerRunRight.png",this.runOffset=0,this.runOffset2=0,this.jumpOffset=0,this.jumpOffset2=0,this.startedJumping=!1,this.draw=this.draw.bind(this),this.keys={left:!1,right:!1,up:!1,down:!1},this.jumps=0}bindMovements(){document.addEventListener("keydown",t=>{switch(t.key){case"ArrowUp":this.keys.up=!0;break;case"ArrowLeft":this.keys.left=!0;break;case"ArrowRight":this.keys.right=!0;break;case"ArrowDown":this.keys.down=!0}}),document.addEventListener("keyup",t=>{switch(t.key){case"ArrowUp":this.keys.up=!1;break;case"ArrowLeft":this.keys.left=!1;break;case"ArrowRight":this.keys.right=!1;break;case"ArrowDown":this.keys.down=!1}})}draw(){this.ctx.clearRect(0,0,this.W,this.H=this.H-.01),this.update();let t=this.keys.up?this.jumpOffset2:this.runOffset2;this.posY>this.H-64&&(this.posY=this.H-64),this.posY<this.H-64&&!this.bottomHit&&(this.posY+=10),this.ctx.drawImage(this.player,t,0,64,64,this.posX,this.posY,this.width,this.height)}parseCollisions(){this.hit?(this.bottomHit&&(this.rightHit=!1,this.leftHit=!1),this.rightHit&&(this.posX-=2),this.leftHit&&(this.posX+=2),this.topHit&&(this.posY+=10)):(this.rightHit=!1,this.leftHit=!1,this.topHit=!1,this.bottomHit=!1)}checkJump(){this.keys.up&&!this.topHit?(this.jumps%5==0&&(this.startedJumping||(this.jumpOffset=0),this.jumpOffset+=64,this.jumpOffset=this.jumpOffset%704,(this.keys.left||this.player.src.indexOf("Left")>-1)&&(this.player.src="./jumpLeft.png"),(this.keys.right||this.player.src.indexOf("Right")>-1)&&(this.player.src="./jumpRight.png"),this.startedJumping=!0),this.jumpOffset>=256&&this.jumpOffset<384?this.posY-=30:this.jumpOffset>=384&&this.jumpOffset<512&&!this.bottomHit?this.posY+=10:640===this.jumpOffset&&(this.startedJumping=!1),this.player.src.indexOf("Right")>-1?this.jumpOffset2=640-this.jumpOffset:this.jumpOffset2=this.jumpOffset,this.jumps++):(this.posY<this.H-64&&!this.bottomHit&&(this.posY+=30),this.startedJumping=!1,this.jumpOffset=64,this.jumpOffset2=64)}checkWalk(){this.keys.left&&!this.leftHit&&(this.posX-=10,this.keys.up?this.jumpOffset<256&&(this.posX+=10):(this.runOffset+=64,this.runOffset2=this.runOffset%320,this.player.src="./playerRunLeft.png")),this.keys.right&&!this.rightHit&&(this.posX+=10,this.keys.up?this.jumpOffset<256&&(this.posX-=10):(this.runOffset+=64,this.runOffset2=this.runOffset%320,this.runOffset2=256-this.runOffset2,this.player.src="./playerRunRight.png"))}update(){this.parseCollisions(),this.checkJump(),this.checkWalk()}}(s,i,h-86);n.bindMovements();const a=new class{constructor(t,s,i,h){this.ctx=t,this.W=s,this.H=i,this.season=h||"winter"}createGhosts(){switch(this.season){case"winter":this.ghosts=[{x:this.W/3,y:this.H-100,w:100,h:100},{x:this.W/3-100,y:this.H-200,w:100,h:100},{x:this.W/3+100,y:this.H-300,w:100,h:100}]}}draw(){this.ghosts.forEach(t=>{this.ctx.beginPath(),this.ctx.rect(t.x,t.y,t.w,t.h-=.01),this.ctx.lineWidth="4",this.ctx.strokeStyle="rgba(230, 0, 0, .01)",this.ctx.stroke()})}}(s,i,h-90);a.createGhosts(),new class{constructor(t,s,i,h,e){this.weather=t,this.stickman=s,this.ghosts=i,this.W=h,this.H=e,this.bindEvents=this.bindEvents.bind(this)}bindEvents(){document.addEventListener("keypress",t=>{if(32!==t.keyCode)return;const s=this.weather.ctx.getImageData(0,0,this.W,this.H).data;for(let t=0;t<s.length;t+=4)0===s[t]&&0===s[t+1]&&0===s[t+2]&&0===s[t+3]?(s[t]=255-s[t],s[t+1]=255-s[t+1],s[t+2]=255-s[t+2],s[t+3]=255):255===s[t]&&3===s[t+3]?s[t+3]=255:(s[t]=255-s[t],s[t+1]=255-s[t+1],s[t+2]=255-s[t+2]);const i=document.getElementById("screenshot-canvas");i.width=this.W,i.height=this.H;const h=i.getContext("2d"),e=h.createImageData(this.W,this.H);for(let t=0;t<e.data.length;t++)e.data[t]=s[t];h.putImageData(e,0,0),setTimeout(()=>{h.clearRect(0,0,this.W,this.H)},2e3)})}}(r,n,a,i,h).bindEvents();const o=new class{constructor(t,s){this.stickman=t,this.ghosts=s}isStickmanColliding(){let t,s;return this.stickman.hit=!1,this.ghosts.ghosts.some(i=>{if([s,t]=[!1,!1],this.stickman.posX>=i.x&&this.stickman.posX<=i.x+i.w&&([this.stickman.leftHit,s]=[!0,!0]),this.stickman.posX+this.stickman.width>=i.x&&this.stickman.posX+this.stickman.width<=i.x+i.w&&([this.stickman.rightHit,s]=[!0,!0]),this.stickman.posY>=i.y&&this.stickman.posY<=i.y+i.h&&([this.stickman.topHit,t]=[!0,!0]),this.stickman.posY+this.stickman.height>=i.y&&this.stickman.posY+this.stickman.height<=i.y+i.h&&([this.stickman.bottomHit,t]=[!0,!0]),s&&t)return this.stickman.hit=!0,!0}),this.stickman.hit}}(n,a);requestAnimationFrame(function t(){n.draw(),r.draw(),a.draw(),o.isStickmanColliding(),requestAnimationFrame(t)})})}]);
//# sourceMappingURL=bundle.js.map