!function(t){var s={};function e(i){if(s[i])return s[i].exports;var h=s[i]={i:i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=0)}([function(t,s,e){"use strict";e.r(s);var i=function(...t){const s=[],e=t[0];for(let i=0;s.length<=e.length;i+=4){let e=t[t.length-1].slice(i,i+4),h=2;for(;(void 0===e[0]||0===e[0]&&0===e[1]&&0===e[2]&&0===e[3])&&h<t.length+1;)e=t[t.length-h].slice(i,i+4),h++;e[0]?s.push(e[0],e[1],e[2],e[3]):s.push(0,0,0,0)}return s};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("game-canvas"),s=t.getContext("2d");let e=window.innerWidth,h=window.innerHeight;t.width=e,t.height=h;const r=new Image;r.src="./blocks.png",r.onload=(()=>{for(let t=0;t<e;t+=100)s.drawImage(r,t,h-90,100,100)});const a=new class{constructor(t,s,e){this.mp=500,this.particles=[];for(let t=0;t<this.mp;t++)this.particles.push({x:Math.random()*s,y:Math.random()*e,r:4*Math.random()+1,d:Math.random()*this.mp});this.ctx=t,this.W=s,this.H=e,this.angle=0,this.draw=this.draw.bind(this)}draw(){let t;this.ctx.clearRect(0,0,this.W,this.H+4),this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.beginPath();for(let s=0;s<this.mp;s++)t=this.particles[s],this.ctx.moveTo(t.x,t.y),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI,!0);this.ctx.fill(),this.update()}update(){let t;this.angle+=.005;for(let s=0;s<this.mp;s++)(t=this.particles[s]).y+=Math.cos(this.angle+t.d)+1+t.r/2,t.x+=2*Math.sin(this.angle),(t.x>this.W+5||t.x<-5||t.y>this.H)&&(s%10>0?this.particles[s]={x:Math.random()*this.W,y:-10,r:t.r,d:t.d}:Math.sin(this.angle)>0?this.particles[s]={x:-5,y:Math.random()*this.H,r:t.r,d:t.d}:this.particles[s]={x:this.W+5,y:Math.random()*this.H,r:t.r,d:t.d})}}(s,e,h-88),n=new class{constructor(t,s){this.W=t,this.H=s;const e=document.getElementById("stickman-canvas");e.width=t,e.height=s,this.ctx=e.getContext("2d"),this.player=new Image,this.player.src="./playerRunRight.png",this.playerX=t/2,this.playerY=s-64,this.runOffset=0,this.runOffset2=0,this.jumpOffset=0,this.jumpOffset2=0,this.started=!1,this.draw=this.draw.bind(this),this.keys={left:!1,right:!1,up:!1,down:!1},this.jumps=0}bindMovements(){document.addEventListener("keydown",t=>{switch(t.key){case"ArrowUp":this.keys.up=!0;break;case"ArrowLeft":this.keys.left=!0;break;case"ArrowRight":this.keys.right=!0;break;case"ArrowDown":this.keys.down=!0}}),document.addEventListener("keyup",t=>{switch(t.key){case"ArrowUp":this.keys.up=!1;break;case"ArrowLeft":this.keys.left=!1;break;case"ArrowRight":this.keys.right=!1;break;case"ArrowDown":this.keys.down=!1}})}draw(){this.ctx.clearRect(0,0,this.W,this.H),this.update();let t=this.keys.up?this.jumpOffset2:this.runOffset2;this.playerY>this.H-100&&(this.playerY=this.H-100),this.ctx.drawImage(this.player,t,0,64,64,this.playerX,this.playerY,100,100)}update(){this.keys.up?(this.jumps%5==0&&(this.started||(this.jumpOffset=0),this.jumpOffset+=64,this.jumpOffset=this.jumpOffset%704,(this.keys.left||this.player.src.indexOf("Left")>-1)&&(this.player.src="./jumpLeft.png"),(this.keys.right||this.player.src.indexOf("Right")>-1)&&(this.player.src="./jumpRight.png"),this.started=!0),this.jumpOffset>=256&&this.jumpOffset<384?this.playerY-=30:this.jumpOffset>=384&&this.jumpOffset<512?this.playerY+=30:640===this.jumpOffset&&(this.started=!1),this.player.src.indexOf("Right")>-1?this.jumpOffset2=640-this.jumpOffset:this.jumpOffset2=this.jumpOffset,this.jumps++):(this.playerY<this.H-100&&(this.playerY+=30),this.started=!1,this.jumpOffset=64,this.jumpOffset2=64),this.keys.left&&(this.playerX-=10,this.keys.up?this.jumpOffset<256&&(this.playerX+=10):(this.runOffset+=64,this.runOffset2=this.runOffset%320,this.player.src="./playerRunLeft.png")),this.keys.right&&(this.playerX+=10,this.keys.up?this.jumpOffset<256&&(this.playerX-=10):(this.runOffset+=64,this.runOffset2=this.runOffset%320,this.runOffset2=256-this.runOffset2,this.player.src="./playerRunRight.png"))}}(e,h-86);n.bindMovements();const c=new class{constructor(t,s,e){this.W=t,this.H=s;const i=document.getElementById("ghosts-canvas");i.width=t,i.height=s,this.ctx=i.getContext("2d"),this.ghosts=[],this.season=e||"winter"}createGhosts(){}draw(){this.ctx.clearRect(0,0,this.W,this.H),this.ctx.beginPath(),this.ctx.rect(this.W/3,this.H-100,100,100),this.ctx.lineWidth="10",this.ctx.strokeStyle="rgba(230, 0, 0, .01)",this.ctx.stroke()}}(e,h-90);new class{constructor(t,s,e,i,h){this.W=i,this.H=h,this.weather=t,this.stickman=s,this.ghosts=e,this.bindEvents=this.bindEvents.bind(this)}bindEvents(){key("space",()=>{const t=this.weather.ctx.getImageData(0,0,this.weather.W,this.weather.H).data,s=this.stickman.ctx.getImageData(0,0,this.stickman.W,this.stickman.H).data,e=this.ghosts.ctx.getImageData(0,0,this.ghosts.W,this.ghosts.H).data,h=i(s,t,e);for(let t=0;t<h.length;t+=4)0===h[t]&&0===h[t+1]&&0===h[t+2]&&0===h[t+3]?(h[t]=255-h[t],h[t+1]=255-h[t+1],h[t+2]=255-h[t+2],h[t+3]=255):255===h[t]&&3===h[t+3]?h[t+3]=255:(h[t]=255-h[t],h[t+1]=255-h[t+1],h[t+2]=255-h[t+2]);const r=document.getElementById("screenshot-canvas");r.width=this.W,r.height=this.H;const a=r.getContext("2d"),n=a.createImageData(this.W,this.H);for(let t=0;t<n.data.length;t++)n.data[t]=h[t];a.putImageData(n,0,0),setTimeout(()=>{a.clearRect(0,0,this.W,this.H)},2e3)})}}(a,n,c,e,h).bindEvents(),setInterval(()=>{n.draw(),a.draw(),c.draw()},26)})}]);
//# sourceMappingURL=bundle.js.map